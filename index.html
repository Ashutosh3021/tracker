<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#6366f1">
    <meta name="description" content="Bulk Tracker - Offline meal and sleep tracking for bulking">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline';">
    <base href="./">
    <title>Bulk Tracker</title>
    <link rel="stylesheet" href="./assets/css/style.css">
    <link rel="manifest" href="./manifest.json" type="application/manifest+json">
</head>
<body>
    <canvas id="confetti-canvas"></canvas>
    
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <picture>
                    <source srcset="./assets/images/logo.avif" type="image/avif" media="(prefers-color-scheme: light)">
                    <source srcset="./assets/images/berserk-logo.jpg" type="image/jpeg" media="(prefers-color-scheme: dark)">
                    <source srcset="./assets/images/logo.png" type="image/png" media="(prefers-color-scheme: light)">
                    <img src="./assets/images/logo.png" alt="Bulk Tracker Logo" class="app-logo">
                </picture>
                <span>Bulk Tracker</span>
            </div>
            <div class="header-actions">
                <button class="icon-btn" id="theme-toggle" title="Toggle theme">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                    </svg>
                </button>
                <button class="icon-btn" id="notifications-btn" title="Notifications">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/>
                        <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
                    </svg>
                </button>
                <button class="icon-btn" id="lock-btn" title="Lock app">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                        <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                    </svg>
                </button>
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="nav-container">
        <div class="nav">
            <button class="nav-btn active" data-section="today">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                    <line x1="16" y1="2" x2="16" y2="6"/>
                    <line x1="8" y1="2" x2="8" y2="6"/>
                    <line x1="3" y1="10" x2="21" y2="10"/>
                </svg>
                Today
            </button>
            <button class="nav-btn" data-section="stats">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="12" y1="20" x2="12" y2="10"/>
                    <line x1="18" y1="20" x2="18" y2="4"/>
                    <line x1="6" y1="20" x2="6" y2="16"/>
                </svg>
                Stats
            </button>
            <button class="nav-btn" data-section="goals">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"/>
                    <path d="M12 6v6l4 2"/>
                </svg>
                Goals
            </button>
            <button class="nav-btn" data-section="badges">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="8" r="7"/>
                    <polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"/>
                </svg>
                Badges
            </button>
            <button class="nav-btn" data-section="settings">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="3"/>
                    <path d="M12 1v6m0 6v6m9-9h-6m-6 0H3m15.364 6.364l-4.243-4.243m-6 0l-4.242 4.243m12.728-12.728l-4.242 4.243m-6 0L5.636 5.636"/>
                </svg>
                Settings
            </button>
            <button class="nav-btn" data-section="backup">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                    <polyline points="7 10 12 15 17 10"/>
                    <line x1="12" y1="15" x2="12" y2="3"/>
                </svg>
                Backup
            </button>
        </div>
    </nav>

    <div class="app-container">
        <div class="content">
            <!-- Today Section -->
            <section id="today" class="section active">
                <div class="date-header">
                    <h1 id="current-date">Today</h1>
                    <p id="current-date-full">Loading...</p>
                </div>
                
                <!-- Meals Card -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"/>
                                <path d="M7 2v20"/>
                                <path d="M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7"/>
                            </svg>
                        </div>
                        <h2 class="card-title">Meals</h2>
                    </div>
                    <div class="meals-grid" id="meals-list">
                        <!-- Meals will be rendered here -->
                    </div>
                </div>

                <!-- Sleep Card -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                            </svg>
                        </div>
                        <h2 class="card-title">Sleep</h2>
                    </div>
                    <div class="sleep-grid">
                        <div class="input-group">
                            <label>
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="12" r="10"/>
                                    <polyline points="12 6 12 12 16 14"/>
                                </svg>
                                Sleep From
                            </label>
                            <input type="time" id="sleep-from">
                        </div>
                        <div class="input-group">
                            <label>
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="12" r="10"/>
                                    <polyline points="12 6 12 12 16 14"/>
                                </svg>
                                Wake Up
                            </label>
                            <input type="time" id="sleep-to">
                        </div>
                    </div>
                    <div class="sleep-result">
                        <div class="sleep-result-value" id="sleep-hours">0.0</div>
                        <div class="sleep-result-label">hours of sleep</div>
                    </div>
                </div>

                <!-- Hydration Card -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"/>
                            </svg>
                        </div>
                        <h2 class="card-title">Hydration (8 cups)</h2>
                    </div>
                    <div class="hydration-grid" id="hydration-cups">
                        <!-- Cups will be rendered here -->
                    </div>
                    <button class="btn btn-secondary btn-block" onclick="app.resetHydration()">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="1 4 1 10 7 10"/>
                            <path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"/>
                        </svg>
                        Reset Cups
                    </button>
                </div>

                <!-- Mood Card -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"/>
                                <path d="M8 14s1.5 2 4 2 4-2 4-2"/>
                                <line x1="9" y1="9" x2="9.01" y2="9"/>
                                <line x1="15" y1="9" x2="15.01" y2="9"/>
                            </svg>
                        </div>
                        <h2 class="card-title">Mood</h2>
                    </div>
                    <div class="mood-container" id="mood-slider">
                        <!-- Mood options will be rendered here -->
                    </div>
                </div>

                <!-- Macronutrient Tracking -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"/>
                                <path d="M7 2v20"/>
                                <path d="M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7"/>
                            </svg>
                        </div>
                        <h2 class="card-title">Macronutrients</h2>
                    </div>
                    
                    <div class="input-group" style="margin-bottom: 1rem;">
                        <label>Protein (g)</label>
                        <input type="number" id="protein-input" step="1" placeholder="Enter protein">
                    </div>
                    <div class="input-group" style="margin-bottom: 1rem;">
                        <label>Carbohydrates (g)</label>
                        <input type="number" id="carbs-input" step="1" placeholder="Enter carbs">
                    </div>
                    
                    <button class="btn btn-primary btn-block" onclick="app.saveMacros()">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="20 6 9 17 4 12"/>
                        </svg>
                        Save Macros
                    </button>
                </div>

                <!-- Totals -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-card-content">
                            <div class="stat-label">Total Calories</div>
                            <div class="stat-value" id="total-calories">0</div>
                            <div class="stat-change">kcal today</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-card-content">
                            <div class="stat-label">Sleep Duration</div>
                            <div class="stat-value" id="total-sleep">0.0</div>
                            <div class="stat-change">hours</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Stats Section -->
            <section id="stats" class="section">
                <div class="date-header">
                    <h1>Statistics</h1>
                    <p>Track your progress over time</p>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-card-content">
                            <div class="stat-label">7-Day Avg Calories</div>
                            <div class="stat-value" id="avg-calories-7">0</div>
                            <div class="stat-change">kcal/day</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-card-content">
                            <div class="stat-label">7-Day Avg Sleep</div>
                            <div class="stat-value" id="avg-sleep-7">0.0</div>
                            <div class="stat-change">hours/night</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-card-content">
                            <div class="stat-label">Current Streak</div>
                            <div class="stat-value" id="current-streak">0</div>
                            <div class="stat-change">days</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-card-content">
                            <div class="stat-label">Total Meals</div>
                            <div class="stat-value" id="total-meals">0</div>
                            <div class="stat-change">logged</div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="chart-container">
                        <div class="chart-header">
                            <h3 class="chart-title">Calories Trend</h3>
                            <div class="chart-controls">
                                <button class="chart-btn active" data-type="calories" data-days="7">7D</button>
                                <button class="chart-btn" data-type="calories" data-days="14">14D</button>
                                <button class="chart-btn" data-type="calories" data-days="30">30D</button>
                            </div>
                        </div>
                        <div class="chart-wrapper">
                            <canvas id="calories-chart"></canvas>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="chart-container">
                        <div class="chart-header">
                            <h3 class="chart-title">Sleep Trend</h3>
                            <div class="chart-controls">
                                <button class="chart-btn active" data-type="sleep" data-days="7">7D</button>
                                <button class="chart-btn" data-type="sleep" data-days="14">14D</button>
                                <button class="chart-btn" data-type="sleep" data-days="30">30D</button>
                            </div>
                        </div>
                        <div class="chart-wrapper">
                            <canvas id="sleep-chart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Weight Tracking Card -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"/>
                                <path d="M7 2v20"/>
                                <path d="M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7"/>
                            </svg>
                        </div>
                        <h2 class="card-title">Weight Tracking</h2>
                    </div>
                    
                    <div class="input-group" style="margin-bottom: 1rem;">
                        <label>Log Today's Weight (kg)</label>
                        <div style="display: flex; gap: 0.5rem;">
                            <input type="number" id="weight-input" step="0.1" placeholder="Enter weight">
                            <button class="btn btn-primary" onclick="app.saveWeight()" style="white-space: nowrap;">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="20 6 9 17 4 12"/>
                                </svg>
                                Save
                            </button>
                        </div>
                    </div>
                    
                    <div class="chart-container">
                        <div class="chart-header">
                            <h3 class="chart-title">Weight Trend</h3>
                            <div class="chart-controls">
                                <button class="chart-btn active" data-type="weight" data-days="7">7D</button>
                                <button class="chart-btn" data-type="weight" data-days="14">14D</button>
                                <button class="chart-btn" data-type="weight" data-days="30">30D</button>
                            </div>
                        </div>
                        <div class="chart-wrapper">
                            <canvas id="weight-chart"></canvas>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Goals Section -->
            <section id="goals" class="section">
                <div class="date-header">
                    <h1>Fitness Goals</h1>
                    <p>Set and track your targets</p>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"/>
                                <polyline points="16 12 12 8 8 12"/>
                                <line x1="12" y1="16" x2="12" y2="8"/>
                            </svg>
                        </div>
                        <h2 class="card-title">Goal Type</h2>
                    </div>
                    
                    <div class="input-group" style="margin-bottom: 1rem;">
                        <label>Select your fitness goal:</label>
                        <select id="fitness-goal" style="padding: 0.875rem 1rem; border: 2px solid var(--border); border-radius: 0.5rem; background: var(--bg-secondary); color: var(--text-primary); font-size: 1rem; transition: all 0.2s ease;">
                            <option value="bulk">Bulking (Gain Muscle Mass)</option>
                            <option value="cut">Cutting (Lose Fat)</option>
                        </select>
                    </div>
                    
                    <div class="input-group" id="cutting-intensity-group" style="margin-bottom: 1rem; display: none;">
                        <label>Cutting Intensity:</label>
                        <select id="cutting-intensity" style="padding: 0.875rem 1rem; border: 2px solid var(--border); border-radius: 0.5rem; background: var(--bg-secondary); color: var(--text-primary); font-size: 1rem; transition: all 0.2s ease;">
                            <option value="slow">Slow Cut (0.5-1% body weight/week)</option>
                            <option value="moderate">Moderate Cut (1-1.5% body weight/week)</option>
                            <option value="aggressive">Aggressive Cut (1.5-2% body weight/week)</option>
                        </select>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"/>
                                <polyline points="16 12 12 8 8 12"/>
                                <line x1="12" y1="16" x2="12" y2="8"/>
                            </svg>
                        </div>
                        <h2 class="card-title">Goal Settings</h2>
                    </div>
                    
                    <div class="input-group" style="margin-bottom: 1rem;">
                        <label>Current Weight (kg)</label>
                        <input type="number" id="current-weight" step="0.1" placeholder="75">
                    </div>
                    <div class="input-group" id="target-gain-group" style="margin-bottom: 1rem;">
                        <label>Target Gain (kg)</label>
                        <input type="number" id="target-weight" step="0.1" placeholder="4">
                    </div>
                    <div class="input-group" id="target-loss-group" style="margin-bottom: 1rem; display: none;">
                        <label>Target Fat Loss (kg)</label>
                        <input type="number" id="target-fat-loss" step="0.1" placeholder="4">
                    </div>
                    <div class="input-group" style="margin-bottom: 1rem;">
                        <label>Timeframe (weeks)</label>
                        <input type="number" id="target-weeks" step="1" placeholder="8">
                    </div>
                    <div class="input-group" style="margin-bottom: 1.5rem;">
                        <label>Maintenance Calories</label>
                        <input type="number" id="maintenance-calories" step="50" placeholder="2400">
                    </div>
                    
                    <button class="btn btn-primary btn-block" onclick="app.saveGoals()">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="20 6 9 17 4 12"/>
                        </svg>
                        Save Goals
                    </button>
                </div>

                <div class="goal-card" id="goal-progress">
                    <h3 style="margin-bottom: 1rem; font-size: 1.25rem; font-weight: 600;">Progress Overview</h3>
                    <div id="goal-details">
                        <!-- Goal details will be rendered here -->
                    </div>
                </div>
            </section>

            <!-- Badges Section -->
            <section id="badges" class="section">
                <div class="date-header">
                    <h1>Achievements</h1>
                    <p>Unlock badges by staying consistent</p>
                </div>

                <div class="card">
                    <div class="badges-grid" id="badges-grid">
                        <!-- Badges will be rendered here -->
                    </div>
                </div>
            </section>

            <!-- Settings Section -->
            <section id="settings" class="section">
                <div class="date-header">
                    <h1>Settings</h1>
                    <p>Customize your experience</p>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"/>
                                <path d="M7 2v20"/>
                                <path d="M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7"/>
                            </svg>
                        </div>
                        <h2 class="card-title">Default Meal Calories</h2>
                    </div>
                    
                    <div class="input-group" style="margin-bottom: 1rem;">
                        <label>Breakfast</label>
                        <input type="number" id="cal-breakfast" step="50" placeholder="600">
                    </div>
                    <div class="input-group" style="margin-bottom: 1rem;">
                        <label>Lunch</label>
                        <input type="number" id="cal-lunch" step="50" placeholder="700">
                    </div>
                    <div class="input-group" style="margin-bottom: 1rem;">
                        <label>Dinner</label>
                        <input type="number" id="cal-dinner" step="50" placeholder="700">
                    </div>
                    <div class="input-group" style="margin-bottom: 1rem;">
                        <label>Snacks</label>
                        <input type="number" id="cal-snacks" step="50" placeholder="300">
                    </div>
                </div>

                <!-- Hydration Settings Card -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"/>
                            </svg>
                        </div>
                        <h2 class="card-title">Hydration Settings</h2>
                    </div>
                    
                    <div class="input-group" style="margin-bottom: 1rem;">
                        <label>Daily Hydration Goal (cups)</label>
                        <input type="number" id="hydration-goal" min="1" max="20" step="1" placeholder="8">
                    </div>
                    
                    <button class="btn btn-primary btn-block" onclick="app.saveHydrationSettings()">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="20 6 9 17 4 12"/>
                        </svg>
                        Save Hydration Goal
                    </button>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                                <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                            </svg>
                        </div>
                        <h2 class="card-title">Security</h2>
                    </div>
                    
                    <div class="input-group" style="margin-bottom: 1rem;">
                        <label>Set App PIN (4 digits)</label>
                        <input type="password" id="pin-input" maxlength="4" pattern="[0-9]{4}" placeholder="1234">
                    </div>
                    <button class="btn btn-secondary btn-block" onclick="app.setPin()" style="margin-bottom: 0.5rem;">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                            <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                        </svg>
                        Set PIN
                    </button>
                    <button class="btn btn-secondary btn-block" onclick="app.clearPin()">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                            <path d="M7 11V7a5 5 0 0 1 9.9-1"/>
                        </svg>
                        Clear PIN
                    </button>
                </div>

                <button class="btn btn-primary btn-block" onclick="app.saveSettings()">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="20 6 9 17 4 12"/>
                    </svg>
                    Save All Settings
                </button>

                <div class="card" style="margin-top: 1rem;">
                    <div class="card-header">
                        <div class="card-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                <polyline points="7 10 12 15 17 10"/>
                                <line x1="12" y1="15" x2="12" y2="3"/>
                            </svg>
                        </div>
                        <h2 class="card-title">Reset Data</h2>
                    </div>
                    
                    <p style="color: var(--text-secondary); margin-bottom: 1.5rem; line-height: 1.6;">
                        Erase all your stored data. This action cannot be undone.
                    </p>
                    
                    <button class="btn btn-danger btn-block" onclick="app.resetData()">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                            <polyline points="7 10 12 15 17 10"/>
                            <line x1="12" y1="15" x2="12" y2="3"/>
                        </svg>
                        Reset All Data
                    </button>
                </div>
            </section>

            <!-- Backup Section -->
            <section id="backup" class="section">
                <div class="date-header">
                    <h1>Backup & Restore</h1>
                    <p>Keep your data safe</p>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                <polyline points="7 10 12 15 17 10"/>
                                <line x1="12" y1="15" x2="12" y2="3"/>
                            </svg>
                        </div>
                        <h2 class="card-title">Data Management</h2>
                    </div>
                    
                    <p style="color: var(--text-secondary); margin-bottom: 1.5rem; line-height: 1.6;">
                        Export your data as JSON to create a backup, or import a previous backup to restore your data.
                    </p>
                    
                    <button class="btn btn-primary btn-block" onclick="app.exportData()" style="margin-bottom: 0.75rem;">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                            <polyline points="7 10 12 15 17 10"/>
                            <line x1="12" y1="15" x2="12" y2="3"/>
                        </svg>
                        Download Backup
                    </button>
                    <button class="btn btn-secondary btn-block" onclick="document.getElementById('import-file').click()">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                            <polyline points="17 8 12 3 7 8"/>
                            <line x1="12" y1="3" x2="12" y2="15"/>
                        </svg>
                        Upload Backup
                    </button>
                    <input type="file" id="import-file" accept=".json">
                </div>
            </section>
        </div>
    </div>

    <!-- Substitution Modal -->
    <div class="modal" id="substitution-modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <line x1="12" y1="8" x2="12" y2="12"/>
                        <line x1="12" y1="16" x2="12.01" y2="16"/>
                    </svg>
                </div>
                <h2 class="modal-title">Add Substitution?</h2>
            </div>
            <p class="modal-text" id="substitution-text"></p>
            <div class="modal-buttons" id="substitution-options"></div>
        </div>
    </div>

    <!-- Voice Button -->
    <button class="voice-btn" id="voice-btn" title="Voice commands">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"/>
            <path d="M19 10v2a7 7 0 0 1-14 0v-2"/>
            <line x1="12" y1="19" x2="12" y2="23"/>
            <line x1="8" y1="23" x2="16" y2="23"/>
        </svg>
    </button>

    <!-- JavaScript Modules -->
    <script src="assets/js/validation.js" type="module"></script>
    <script src="assets/js/storage.js" type="module"></script>
    <script src="assets/js/charts.js" type="module"></script>
    <script src="assets/js/analytics.js" type="module"></script>
    <script src="assets/js/ui.js" type="module"></script>
    <script src="assets/js/voice.js" type="module"></script>
    <script src="assets/js/app.js" type="module"></script>
</body>
</html>